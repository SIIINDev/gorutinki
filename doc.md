# Описание игры
За основу взята классическая старая игра bomberman с некоторыми изменениями.

Игроки управляют несколькими юнитами, расчищая карту от уничтожаемых препятствий, сражаясь или убегая от соперников и мобов, стараясь набрать как можно больше очков за отведенные раунды.

## Важная информация
Во время тестовых раундов возможна корректировка баланса игры. Также при нахождении ошибок возможна перезагрузка сервера со сбросом раунда. В этих случаях будет оповещение в топике "новости".

Все сообщения в топик "Поддержка" должны быть с тегом бота @DatsHackathonsBot, иначе сообщения будут удалены.

О всех найденных ошибках просьба сообщать в топик "поддержка".

Если вы нашли, что в документации есть неточность либо недосказанность - напишите об этом в топик "поддержка".

В случае технических ошибок во время финальных раундов результаты раунда могут быть отменены и будет добавлен дополнительный раунд.

В случае возникновения обоснованных подозрений в нечестной игре или мультиаккаунтинге со стороны команды организаторы оставляют за собой право принять решение о её дисквалификации.

## Сервер игры
Есть два независимых сервера. Один тестовый – будет работать все дни геймтона, и один основной, на котором будут проходить финальные раунды.

Ссылка на свагер https://games.datsteam.dev/static/datsjinglebang/docs/openapi/

Ссылка на статистику https://gamethon.datsteam.dev/datsjinglebang/boomstats

## Раунды
Раунд - это ограниченный по времени этап игры с заданным началом и окончанием, после которого фиксируется результат.

На каждое начало раунда весь прогресс юнитов сбрасывается.

Расписание тестовых и финальных раундов можно посмотреть в соответствующем API.

## Карта
Игра происходит на 2D карте, которая имеет следующие типы объектов:
- непроходимые препятствия (нельзя уничтожить)
- препятствия, которые можно уничтожить
- юниты команды и ее соперников
- мобы
- бомбы

Размер карты может корректироваться для каждого раунда в зависимости от количества играющих команд.
На разных раундах могут быть разные карты (отличаются расположением препятствий).

## Игровой мир
События в мире происходят с частотой дискретизации около 50мс.

## Юниты
Команда получает под управление 6 юнитов, которыми может управлять.

Каждый юнит может перемещаться по карте и устанавливать бомбы.

В случае потери всех юнитов - они заново появятся на карте, команда получит штраф в виде 10% от текущих набранных очков.

### Обзор юнитов
Каждый юнит видит все объекты в радиусе 5 клеток от себя. Радис считается по формуле
$$ r^2 = x^2 + y^2 $$

## Мобы
В ходе игры на карте будут появляться неигровые персонажи - мобы. Они патрулируют карты в соответствии со своим паттерном, зависящим от типа.

### Призрак
Будьте осторожны, на тесных улицах бродят неупокоенные духи прошлых игроков. Они медленные, но целеустремленные.

Скорость передвижения - 1.

Особенности - способен проходить через препятствия.

Радиус обзора - 10.

Паттерн движения - аналогичен патрульному, пока в его поле зрения не появится юнит игрока. После обнаружения цели он назначает её основной и начинает преследование, которое продолжается до тех пор, пока юнит не покинет область видимости или не будет уничтожен.

### Патрульный
Ленивый малый. Ему сказали патрулировать - он и пошел, куда ноги поведут.

Скорость передвижения - 1.

Особенности - нет.

Паттерн движения - выбирает произвольное свободное направление и может сменить его в любой момент.

Если любой юнит игрока пересечется с мобом на одной клетке - то юнит игрока будет уничтожен, а моб продолжит свое движение.

Моб появляется в спящем состоянии. После 10 секунд сна, моб начинает свой патруль в соответствии со своим типом.

Пока моб спит, юниты игроков могут свободно проходить через него и его нельзя взорвать.

## Управление юнитом
Каждому юниту можно задать команду на передвижение и установку бомб.

Юнит может передвигаться только по смежным клеткам и не может ходить наискосок.

Пока юнит не завершит передвижение ему нельзя отдать команду на новое передвижение.

Передвижение задается списком координат (max 30), по которым должен переместиться юнит.

Юнит может проходить сквозь своих юнитов и юнитов оппонентов.

Юнит не может проходить сквозь любые препятствия**, через бомбы**. Если бомбу установили прямо под юнитом, то он может сойти с этой клетки.

** Если не взяты соответствующие усиления.

Установка бомб задается координатами, на которых они должны быть расположены. Эти координаты должны присутствовать на указанном пути юнита в момент его передвижения.

Юниты имеют скорость передвижения исчисляемую в клетках в секунду(всегда целочисленное значение). Стартовая скорость 2 кл/с.

Если по ходу движения юнит доходит до клетки, на которой кто-либо установил бомбу и она мешает ему достичь цели, то юнит останавливается на клетке перед бомбой и его путь сбрасывается.

Для каждого юнита ошибки обрабатываются отдельно. То есть если в запросе одному юниту отдана валидная команда, а второму нет - то первая команда будет принята, а вторая отброшена и в ответе будет соответствующая ошибка.


## Бомбы
Каждый юнит во время движения может устанавливать бомбы. На старте раунда все имеют по одной бомбе, которая имеет радиус взрыва равный единице и время до взрыва равное 8 секундам.

За скилл поинты можно увеличить количество бомб, радиус взрыва и уменьшить время до взрыва.

Новая бомба появится заново у юнита, как только взорвется старая.

Взрыв бомбы происходит в виде креста (рисунок 1). Длина луча определяется текущим радиусом взрыва.

Луч взрыва бомбы уничтожает на своем пути:
- всех юнитов и мобов
- разрушаемые препятствия

Уничтожив препятствие или другую бомбу луч дальше не распространяется. Уничтоженные юниты и мобы не мешают распространению луча бомбы.

Команду установки бомб можно отдать только в совместно с командой передвижения. Игрок указывает список координат в которых по ходу пути будут выставлены бомбы (рисунок 2).

Каждая бомба имеет свой таймер, который запускается в момент ее установки на клетку.

Если луч взрыва бомбы задевает другую бомбу, то дальше он не распространяется, а затронутая бомба взрывается досрочно.

Координаты установки бомб можно указывать в произвольном порядке. Бомба будет установлена в тот момент, как только юнит попадет на указанную координату.

## Усиление юнитов
Каждые 1.5 минуты с начала раунда команда получает скилл поинт. Их можно потратить на одно из усилений. За один раунд можно получить максимум 10 скилл поинтов.

### апгрейд карманов
Каждый юнит нашивает дополнительный карман на одежду, что позволяет ему переносить большее количество своего основного аргумента.

+1 к максимальному количеству бомб.

Стоимость: 1 скилл поинт

### апгрейд бомбы
Когда не пропускал уроки химии.

+1 к радиусу взрыва бомбы

Стоимость: 1 скилл поинт

### апгрейд тела
Регулярные походы в спортзал всегда приносят свои плоды.

+1 к скорости передвижения. Максимум 3 улучшения.

Стоимость: 1 скилл поинт

### апгрейд зрения
Надеваем очки и с каждым новым уровнем улучшаем линзы. Кто-то может вас назвать очкариком, но вы теперь сможете его увидеть заранее, чтобы получше подготовиться.

+3 к области видимости юнитов

Стоимость: 1 скилл поинт

### апгрейд софт скилов
Вы все более исскусно овладеваете ораторским исскуством и можете привлекать все больше союзников на свою сторону.

+1 к максимальному количеству юнитов.

Стоимость: 2 скилл поинта

Юнит появляется сразу после запроса рядом с рандомным союзным юнитом.

### апгрейд брони
Надень куртку потеплее, а лучше еще и двое штанов - на улице прохладно. Ну и мало ли где это еще может помочь.

+1 к броне.

Каждый уровень брони позволяет пережить 1 взрыв. Поглотив взрыв, броня теряет 1 уровень.

Броня не защищает от урона мобов. Восстановить броню можно только при возрождении юнитов.

При взятии улучшения, все юниты увеличивают текущий уровень брони на 1.

Стоимость: 1 скилл поинт

### апгрейд фитиля бомбы
Иногда короче не значит хуже.

-2 секунды до взрыва бомбы. Максимум 3 улучшения.

Стоимость: 1 скилл поинт

### апгрейд акробатики
Немного паркура и вот уже перед нами остается все меньше непреодолимых препятствий.

Улучшение проходимости юнита.

Стоимость: 2 скилл поинта

На 1 уровне позволяет проходить через бомбы.

На 2 уровне позволяет проходить через разрушаемые препятствия.

На 3 уровне позволяет проходить через все препятствия.

## Возрождение юнитов
На старте раунда все юниты возрождаются в одной рандомной координате карты равномерно удаленной от точек возрождения других команд.

При смерти последнего юнита они все так же будут возрождены на рандомной координате карты.

При возрождении юнитов они получают неуязвимость к взрывам бомб и мобам на 5 секунд.

## Начисление/потеря очков в раунде
При уничтожении разрушаемого препятствия взрывом бомбы команда получает 1 очко. Если взрыв уничтожил больше 1 препятствия, то будут начислены дополнительные очки.

За второе препятствие начисляется 2 очка, за третье - 3, за четвертое - 4.

Максимальное количество очков, которые можно набрать за один взрыв - 10 (1 + 2 + 3 + 4).

За уничтожение юнита соперника начисляется 10.

За уничтожение моба начисляется 10 очков.

За возрождение юнитов команда получает штраф в 10% от текущих очков.

## Определение победителя
За каждый раунд игрокам будут начисляться баллы, которые являются критерием для победы.

В зависимости от того, какое место в раунде по очкам заняла команда ей будут начислены баллы в соответствии с таблицей 1.

Если в раунде одинаковое количество очков набрали несколько команд, то все они получат одинаковое количество баллов за раунд.

Если по итогу всех финальных раундов у нескольких команд одинаковое количество баллов, то будут введены дополнительные критерии, чтобы распределить призовые места.

### Дополнительные критерии
- взорвано больше всего юнитов соперников
- взорвано меньше всего бомб
- пройден меньший путь

## Критерий активного игрока
Сертификат участия получат те игроки, команды которых участвовали в половине финальных раундов и в каждом взорвали хотя бы 1 препятствие.

## Ограничения
Игроки могут отправлять не более 3 запросов в секунду.

## Достижения

### Счастливчик
Занять 77-е место в 4 раунде.

В случае, если на 77-м месте окажется несколько команд, достижение отдается одной путём рандомного выбора.

### Demolition Master
В 1 раунде сделать цепочку взрывов из минимум 4 бомб, каждая из которых взрывает другую бомбу и уничтожает минимум 1 препятствие.

Одна бомба может взорвать больше одной бомбы, но обязательно, чтобы каждая бомба взорвала препятствие.

Не обязательно чтобы все бомбы принадлежали одному игроку, достижение получит тот, чья бомба запустила цепную реакцию.

### Читер
Первым найти и использовать рабочий чит-код. Возможно получить в любой момент времени. Работает только на тестовом сервере. Если нашли до начала раундов, пришлите боту поддержки.

Иногда ленд и баннер могут содержать чуть больше, чем видно на первый взгляд...

## Таблица 1. Баллы за место

| №  | баллы | №  | баллы |
|----|-------|----|-------|
| 1  | 170 | 27 | 24    |
| 2  | 114 | 28 | 23    |
| 3  | 86  | 29 | 22    |
| 4  | 69  | 30 | 21    |
| 5  | 58  | 31 | 20    |
| 6  | 50  | 32 | 19    |
| 7  | 44  | 33 | 18    |
| 8  | 43  | 34 | 17    |
| 9  | 42  | 35 | 16    |
| 10 | 41  | 36 | 15    |
| 11 | 40  | 37 | 14    |
| 12 | 39  | 38 | 13    |
| 13 | 38  | 39 | 12    |
| 14 | 37  | 40 | 11    |
| 15 | 36  | 41 | 10    |
| 16 | 35  | 42 | 9     |
| 17 | 34  | 43 | 8     |
| 18 | 33  | 44 | 7     |
| 19 | 32  | 45 | 6     |
| 20 | 31  | 46 | 5     |
| 21 | 30  | 47 | 4     |
| 22 | 29  | 48 | 3     |
| 23 | 28  | 49 | 2     |
| 24 | 27  | 50 | 1     |
| 25 | 26  | 51 | 1     |
| 26 | 25  | …  | 1     |
